<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>משחק קפיצות הכדור</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            border: 1px solid #000;
        }
        .score {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            color: red;
        }
        .bounces {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: black;
        }
    </style>
</head>
<body>
    <div class="score">שיא: 0</div>
    <div class="bounces">קפיצות: 0</div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script>
        // אתחול משתנים
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const ballRadius = 20;
        const markerWidth = 100;
        const markerHeight = 10;
        let ballX = canvas.width / 2;
        let ballY = canvas.height / 2;
        let ballSpeedX = 30;
        let ballSpeedY = 30;
        let markerX = canvas.width / 2;
        let numBounces = 0;
        let maxBounces = 0;
        let resetBounces = false;

        // פונקציה לציור הכדור
        function drawBall() {
            ctx.beginPath();
            ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
            ctx.fillStyle = 'darkgrey'; // שינוי צבע הכדור לאפור כהה
            ctx.fill();
            ctx.closePath();
        }

        // פונקציה לציור הסמן
        function drawMarker() {
            ctx.beginPath();
            ctx.rect(markerX - markerWidth / 2, canvas.height - markerHeight, markerWidth, markerHeight);
            ctx.fillStyle = 'black';
            ctx.fill();
            ctx.closePath();
        }

        // פונקציה לציור הטקסטים
        function drawText() {
            ctx.font = '24px Arial';
            ctx.fillStyle = 'black';
            ctx.textAlign = 'center';
            ctx.fillText(`קפיצות: ${numBounces}`, canvas.width / 2, 30);
            
            ctx.fillStyle = 'red';
            ctx.textAlign = 'left';
            ctx.fillText(`שיא: ${maxBounces}`, 10, 30);
        }

        // פונקציה לעדכון מיקום הכדור
        function updateBall() {
            ballX += ballSpeedX;
            ballY += ballSpeedY;

            // בדיקת התנגשות עם גבולות
            if (ballX - ballRadius < 0 || ballX + ballRadius > canvas.width) {
                ballSpeedX = -ballSpeedX;
            }

            if (ballY - ballRadius < 0) {
                ballSpeedY = -ballSpeedY;
            }

            if (ballY + ballRadius > canvas.height) {
                if (markerX - markerWidth / 2 < ballX && ballX < markerX + markerWidth / 2) {
                    // הכדור נוגע בסמן - קופץ למעלה
                    ballSpeedY = -Math.abs(ballSpeedY); // מבטיח שהכדור ינוע למעלה
                    ballSpeedX += ballSpeedX > 0 ? 0.2 : -0.2; // הגדלת מהירות ה-X
                    ballSpeedY += ballSpeedY > 0 ? 0.2 : -0.2; // הגדלת מהירות ה-Y
                    numBounces++;
                    resetBounces = false;
                } else {
                    resetBounces = true;
                }

                if (resetBounces) {
                    ballX = canvas.width / 2;
                    ballY = canvas.height / 2;
                    ballSpeedX = 5;
                    ballSpeedY = 5;
                    numBounces = 0;
                }

                maxBounces = Math.max(maxBounces, numBounces);
            }
        }

        // פונקציה לציור המסך
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBall();
            drawMarker();
            drawText();
        }

        // לולאת המשחק
        function gameLoop() {
            updateBall();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // מעקב אחרי תנועת העכבר
        canvas.addEventListener('mousemove', (event) => {
            markerX = event.clientX - canvas.getBoundingClientRect().left;
        });

        // התחלת המשחק
        gameLoop();
    </script>
</body>
</html>
